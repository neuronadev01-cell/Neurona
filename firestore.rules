rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    
    // Users collection - allow read and create for signup/referral functionality
    match /users/{userId} {
      allow read, create: if true;
      allow update: if true; // For referral count updates
      allow delete: if false; // Never allow deletion in production
    }
    
    // Test collection - for Firebase connectivity testing
    match /test/{testId} {
      allow read, create: if true;
      allow update, delete: if false;
    }
    
    // Deny access to all other collections
    match /{document=**} {
      allow read, write: if false;
    }
  }
}